#!/bin/bash

######## configuration ##########
# seconds between messages
microbreak_time=1
# message to display 
message="Try focussing a far object outside the window with the eye to relax!"

function slow_down(){
	#zenity --warning --text "slow down mouse";
	mouse-speed -d 30
}

while true; do
	sleep $microbreak_time
	if ! zenity --warning --text $message --height=800 --width=800; then
		slow_down
	else
		(
		echo "99"; sleep 8
		echo "# Maus speed reset to 100%"; sleep 2
		echo "100"
		) | if zenity --progress --text $message --percentage=0 --auto-close  --height=800 --width=800 --pulsate; then
			#zenity --info --text "Maus wieder schnell!"
			mouse-speed -s 100
		else 
			slow_down
		fi
		
	fi
done
